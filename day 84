from collections import deque

# Node Structure
class Node:
    def __init__(self, x):
        self.data = x
        self.left = None
        self.right = None

# Recursive function to build the binary tree.
def buildTreeRecur(mp, preorder, preIndex, left, right):
    if left > right:
        return None

    rootVal = preorder[preIndex[0]]
    preIndex[0] += 1
    root = Node(rootVal)

    index = mp[rootVal]

    root.left = buildTreeRecur(mp, preorder, preIndex, left, index - 1)
    root.right = buildTreeRecur(mp, preorder, preIndex, index + 1, right)

    return root

# Function to construct tree from its inorder and preorder traversals
def buildTree(inorder, preorder):
    mp = {value: idx for idx, value in enumerate(inorder)}
    preIndex = [0]
    return buildTreeRecur(mp, preorder, preIndex, 0, len(inorder) - 1)

# Level order traversal (corrected)
def levelOrder(root):
    if not root:
        return

    queue = deque([root])
    result = []

    while queue:
        node = queue.popleft()
        result.append(node.data)

        if node.left:
            queue.append(node.left)
        if node.right:
            queue.append(node.right)

    print(*result)  # print all in one line separated by space


if __name__ == "__main__":
    inorder = [3, 1, 4, 0, 5, 2]
    preorder = [0, 1, 3, 4, 2, 5]
    root = buildTree(inorder, preorder)
    levelOrder(root)

